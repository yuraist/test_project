
## Задание  
  
Реализовать упрощенную систему выполнения абстрактных заказов.    
Исполнитель видит ленту заказов, доступных для выполнения.    
Исполнитель может принять заказ, а затем его выполнить.    
Ожидающие заказы видны всем, принятые и выполненные заказы доступны только исполнителю.    
У одного заказа может быть только один исполнитель.  
  
Проект должен быть на гитхабе и отражать процесс разработки.    
Код максимально приближенный к боевому (насколько получится).    
Отстуствие "плюшек" (анимации/загрузки/итд) на клиентской стороне не будет минусом.    
    
В проекте уже подключены необходимые библиотеки (py/js/css), а также создана основа   
(настройки/шаблоны/стили/каркасы представлений).    
При желании можно использовать `Django Rest Framework`, а также другие библиотеки.    
Для статики используется `django-pipeline`.    
В базе (`db.sqlite3`) уже проведены начальные миграции, а также созданы пользователи и таски.  
  
  
#### Backend  
1. Получение списка заданий с фильтрацией (все/ожидающие/принятые/выполненные).  
      
    1.1. `apps/base/models.py`: Добавил метод json_representation() в классе Task для отображения экземпляра модели  
    в формате словаря, чтобы в дальнейшем использовать его с функцией JsonResponse().  
      
    1.2. `apps/base/views.py`: Создал классы представлений для получения списков заданий с определенной пользователем фильтрацией.  
      
    1.3. `apps/base/urls.py`: Создал urls для созданных представлений.  

2. Ожидающие заказы доступны для просмотра всем пользователям.  
  
    2.1. `apps/base/views.py`: Реализовал метод `get()` класса представления GetOpenTasksView, возвращающий  
    json со списком ожидающих заказов.  
      
3. Принятые/выполненные заказы доступны для просмотра только исполнителю (поле `assignee`).  
  
    3.1. `apps/base/views.py`: Реализовал метод `get()` класса представления GetInProgressTasksView, возвращающий  
    json со списком принятых заказов. Для фильтрации создается запрос, проверяющий статус задания и его исполнителя – запрашиваются задачи только для текущего пользователя.
    
    3.2. `apps/base/views.py`: Реализовал метод `get()` класса представления GetFinishedTasksView, возвращающий  
    json со списком выполненных заказов. Фильтрация выполняется аналогично фильтрации для принятых заказов.
    
4. Принятие/выполнение заказа (изменение его статуса и назначение `assignee`).   
	
	4.1. `apps/base/views.py`:  Для принятия и выполнения заказа использован метод `put()` (вместо используемого для получения заказов `get()`), так как при выполнении данных запросов будут изменяться данные в БД. 

	4.2. `apps/base/views.py`: В методах выполнения и принятия извлекается `id` из запроса, после чего по данному `id` извлекается задание из БД. Далее проверяется статус задания и его исполнитель. Если по результатам проверки задание может быть изменено на "Принято" или "Выполнено", то оно изменяется и сохраняется в БД.

5. После принятия заказа, другой исполнитель не должен иметь возможность его принять/завершить.
6. Добавить в модель `Task` поле `cоздатель`.

	6.1. `apps/base/models.py`:  Добавлено поле `author` в модель `Task`.

	6.2. `apps/base/admin.py`: В классе `TaskAdmin` переопределен метод `save_model()`, в котором при создании нового задания его автор устанавливается автоматически (если не был установлен вручную).

#### Frontend
![alt text](https://pp.vk.me/c837121/v837121214/1ea27/DAKoB6qKPpc.jpg "Пример")
Сверстать на примере скриншота выше (границы/отступы/размеры и тд - на свое усмотрение).

1. Загрузка/отправка событий - ajax.

	1.1. `apps/base/static/base/js/app.js`: Создал новый `.js` файл для приложения.

	1.2. `project/settings.py`: Добавил `app.js` в `PIPELINE_JAVASCRIPT`.

	1.3. `apps/base/static/base/js/app.js`: Написал функции с ajax-запросами для получения/обновления задач.

2. Переключение табов - изменение фильтра и загрузка данных.

	2.1. `apps/base/static/base/js/app.js`: Написал функцию `changeMenuActiveTab` –ф-ция изменяет активную вкладку в меню, а также перезагружает список заказов.

3. При изменении статуса задания - скрывать, если не подходит под текущий фильтр.

	3.1. `apps/base/static/base/js/app.js`: После изменения статуса заказа, задачи перезагружаются.
  
  
#### Дополнительно  
Не обязательно, но будет плюсом.    
1. Обработка race-condition.  
  
  
### Зависимости  
Список находится в `docs/pip.txt`.    
Установить: `pip install -r docs/pip.txt`   
  
  
### Авторизация    
Login: `admin`    
Password: `admin`